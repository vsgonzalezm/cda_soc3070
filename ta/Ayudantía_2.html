<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Ayudant√≠a 2</title>
    <meta charset="utf-8" />
    <meta name="author" content="Roberto Vel√°zquez" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="gentle-r.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Ayudant√≠a 2
## An√°lisis de Datos Categ√≥ricos
### Roberto Vel√°zquez
### üíª üìä üé®üéªüé∑
### 02-09-2020

---


# Contenidos

.pull-left[

**A.-** Funciones en `R`

- &lt;font color="#FF0066"&gt;&lt;i&gt;function&lt;/i&gt;&lt;/font&gt;

**B.-** Distribuci√≥n Binomial

- &lt;font color="#FF0066"&gt;&lt;i&gt;rbinom&lt;/i&gt;&lt;/font&gt;
- &lt;font color="#FF0066"&gt;&lt;i&gt;dbinom&lt;/i&gt;&lt;/font&gt;

**C.-** Likelihood y Log-Likelihood Functions

- &lt;font color="#FF0066"&gt;&lt;i&gt;function&lt;/i&gt;&lt;/font&gt;

**D.-** Tablas de Contingencia
- &lt;font color="#FF0066"&gt;&lt;i&gt;load("nsca2018.Rda")&lt;/i&gt;&lt;/font&gt;
- &lt;font color="#FF0066"&gt;&lt;i&gt;library(dyply) %&gt;%&lt;/i&gt;&lt;/font&gt;

**E.-** Gr√°ficos en `R`

- &lt;font color="#FF0066"&gt;&lt;i&gt;ggplot2&lt;/i&gt;&lt;/font&gt;

]

.pull-right[
**Nota**: el repositorio o library &lt;font color="#FF0066"&gt;&lt;i&gt;"tidyverse"&lt;/i&gt;&lt;/font&gt;, creado por Hadley Wickham, contiene 8 repositorios o libraries que estaremos utilizando constantemente a lo largo del curso (&lt;font color="#FF0066"&gt;&lt;i&gt;ggplot2, dplyr, tidyr, readr, purrr, tibble, stringr, forcats&lt;/i&gt;&lt;/font&gt;). 

![mc](tdye.png)

]

---

# A.- Funciones en `R`


Si bien la instalaci√≥n de `R` base incorpora las funciones necesarias para la estimaci√≥n estad√≠stica y modelamiento de nuestros datos, en ocaciones es com√∫n que necesitemos realizar tareas para las cuales el lenguaje no ha especificado una funci√≥n. Adicionalmente, al ser `R` un lenguaje de programaci√≥n, podemos optimizar rutas o caminos de estimaci√≥n creando nuestras propias funciones.


- ¬øCu√°les son los componentes de una funci√≥n?


```r
# Sintaxis
area_trian &lt;- function(base, altura) {(base * altura)/2}
cuad_bin &lt;- function(a, b) {(a^(2)) + (2*a*b) + (b^(2))}
```
--
Donde los componentes:

**'area_trian'** = nombre asignado a la funci√≥n que ser√° ejecutado para llamarla.

**function** = comando que define argumentos y operaciones de la funci√≥n.

**()** = argumentos de la funci√≥n.

**{}** = operaciones de la funci√≥n
---
# A.- Funciones en `R`
![](magnolia.png)
---
# A.- Funciones en `R`

- Ejercicio:

El valor de salida de una obra de arte subastada por la casa de coleccionistas Sotheby's es una funci√≥n de los a√±os de antig√ºedad de la obra, donde cada a√±o cumplido agrega un plusvalor de 6000 $USD, siendo este total multiplicado por el n√∫mero de exhibiciones internacionales en las que haya sido expuesta. Con todo, debido a la alta exclusividad de estas mercanc√≠as de *distinci√≥n*, el valor de salida es ponderado por el n√∫mero de due√±os previos de la obra.

--

**a.-** Defina una funci√≥n que permita saber el valor de salida de las obras si la subasta fuera este a√±o.

**b.-** ¬øCu√°l ser√≠a el valor de salida de la obra "Magnolias" de Frida Kahlo (1945), la cual ha participado de 15 exhibiciones internacionales y ha tenido solo 2 due√±os a la fecha?

--

```r
# Sintaxis
#a
valor_subasta &lt;- function(year, intex, owners) {(((2020-year)*6000)*intex)/owners}
#b
magnolia &lt;- valor_subasta(year=1945, intex=15, owners=2)
magnolia
```

```
# [1] 3375000
```
---
# B.- Distribuci√≥n Binomial

La simulaci√≥n de variables aleatorias que sigan par√°metros de distribuci√≥n Bernoulli y Binomial puede ser ejecutadas a trav√©s de dos funciones incorporadas en `R` base.

--

**rbinom**: Esta funci√≥n genera un vector de variables aleatorias distribuidas binomialmente.


```r
# Sintaxis
coin1 &lt;- rbinom(n=1, size=1, p=0.5)
coin1
```

```
# [1] 0
```

--

Donde los argumentos:

**n** = n√∫mero de experimentos independientes.

**size** = n√∫mero de intentos o teraciones.

**p** = probabilidad de √©xito.

---

# B.- Distribuci√≥n Binomial

Ejemplo:

1) Lanzar una moneda con probabilidad `\(p=0.1\)` de obtener 'Cara' (√©xito).


```r
# Sintaxis
ej1 &lt;- rbinom(n=20, size=1, p=0.1)
ej1
```

```
#  [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```

--

2) Lanzar cien veces una moneda con probabilidad `\(p=0.4\)` de obtener 'Cara' (√©xito).



```r
# Sintaxis
ej2 &lt;- rbinom(n=100, size=1, p=0.4)
ej2
```

```
#   [1] 0 0 1 0 0 0 1 1 0 1 1 1 1 1 1 1 0 1 1 0 0 0 1 0 0 1 0 1 0 0 1 1 0 0 0 1 1 0 1 1 0 1 1 0 1 0 0 0 0 1 0 1
#  [53] 0 1 0 1 1 0 0 0 0 0 0 1 0 1 0 0 1 0 1 1 1 0 0 1 0 0 0 1 0 1 0 0 1 0 0 0 0 1 0 0 0 0 0 1 0 0 0 1
```

---

# B.- Distribuci√≥n Binomial

**dbinom**: Esta funci√≥n devuelve el valor de la funci√≥n de densidad de probabilidad (pdf) de la distribuci√≥n binomial.

--


```r
# Sintaxis
coin2 &lt;- dbinom(x=2,size=10,prob=0.3)
coin2
```

```
# [1] 0.2334744
```

--

Donde los argumentos:

**x** = n√∫mero de √©xitos.

**size** = n√∫mero de intentos o teraciones.

**p** = probabilidad de √©xito.

---

# B.- Distribuci√≥n Binomial

Ejemplo:

3) Si la probabilidad de obtener "Cara" es de 70% (*p*=0.7), ¬øcu√°l es la probabilidad de obtener 7 √©xitos en 30 lanzamientos?

`$$\mathbb{P}(Y=7) = \frac{30!}{7!23!} \times (0.7)^{7} \times (1-0.7)^{23}= ?$$`
--


```r
# Sintaxis
ej3 &lt;- dbinom(x=7,size=30,prob=0.7)
ej3
```

```
# [1] 1.578375e-07
```

--

4) ¬ø Y la probabilidad de obtener 21 √©xitos en 30 lanzamientos?

--


```r
# Sintaxis
ej4 &lt;- dbinom(x=21,size=30,prob=0.7)
ej4
```

```
# [1] 0.1572908
```

---
# C.- Likelihood y Log-Likelihood Functions

- **Likelihood Function**: Funci√≥n que cuantifica la plausibilidad de diferentes valores del par√°metro dados los datos.

 `\(\mathcal{L}(p) = P(X_{1})P(X_{2}) \dots P(X_{n}) = \frac{n!}{k! (n-k)!}*p^{k}(1-p)^{n-k} \quad \text{   donde  } k= \sum X_{i}\)`

--

- **Log-Likelihood Function**: Maximizaci√≥n de la likelihood function en base a las propiedades del logaritmo natural.

 `\(\ell\ell(p) = \ln \mathcal{L}(p)  = \ln\frac{n!}{k! (n-k)!}+ k \ln(p) + (n - k) \ln(1-p)\)` 

--

- As√≠, el **Maximum Likelihood Estimation** de `\(p\)` es la proporci√≥n de 1's en la muestra.

 `\(\hat{p} = \frac{\sum X_{i}}{n}\)`
 
 De acuerdo a lo visto anteriormente...

---
# C.- Likelihood y Log-Likelihood Functions
![](orq.png)
---
# C.- Likelihood y Log-Likelihood Functions

- Ejercicio:

Con el prop√≥sito de saber qu√© parte de los m√∫sicos cl√°sicos m√°s renombrados de EEUU deben el √©xito en sus carreras al talento musical 'innato', y no a su capital econ√≥mico, social y cultural, un soci√≥logo entrevista a 100 m√∫sicos de las orquestas filarm√≥nicas m√°s importantes del pa√≠s para registrar qui√©nes tienen 'oido absoluto' asumiendo iid.  Posteriormente grafica los resultado de los y las entrevistados en su muestra. Como el investigador no cuenta con el par√°metro poblacional, les pide ayuda para estimar qu√© valor *p* es m√°s plausible que genere sus datos. 

![](Ayudant√≠a_2_files/figure-html/unnamed-chunk-9-1.png)&lt;!-- --&gt;

---
# C.- Likelihood y Log-Likelihood Functions

- Ejercicio:

**a.-** Defina las funciones Likelihood y Log-likelihood en base al tipo de distribuci√≥n que asumimos.

--


```r
# Sintaxis
#a.Likelihood y Log-likelihood functions para una distribuci√≥n binomial
L &lt;- function(p, n, k){choose(n,k)*(p^(k))*((1-p)^(n-k))}
LL &lt;- function(p,n,k) {log(choose(n,k))+(k * log(p)) + ((n - k)*log(1-p))}
```
--

**b.-** ¬øCu√°l es el valor `\(p\)` m√°s plausible de los datos del investigador de acuerdo a la Likelihood function? 
  

```r
# Sintaxis
#b.Estimaci√≥n v√≠a MLE y funci√≥n de SE
p1 &lt;- L(p=0.01,n=100,k=1)
p1
```

```
## [1] 0.3697296
```
---
# C.- Likelihood y Log-Likelihood Functions

- Ejercicio:


```r
#Sintaxis
#b.Gr√°ficamente
data_musiques2 &lt;- data_frame(x = seq(from = 0, to = 1, by=0.01), y = (100*(x^(1))*((1-x)^(99)) ))
plot &lt;- ggplot(data = data_musiques2, mapping = aes(x = x)) +
geom_path(aes(y=y), size=1.5, colour="#00A08A") +
labs(y="L(p)", x="p", title="Likelihood Function de p")
print(plot)
```

![](Ayudant√≠a_2_files/figure-html/unnamed-chunk-12-1.png)&lt;!-- --&gt;
---
# C.- Likelihood y Log-Likelihood Functions

- Ejercicio:

**c.-** ¬øCu√°l ser√≠a el log-likelihood de m√∫sicos y m√∫sicas con 'o√≠do absoluto' en las orquestas filarm√≥nicas m√°s importantes de EEUU para una probabilidad de 60% y 80% ? Eval√∫e.

--


```r
# Sintaxis
#c.Evaluaci√≥n 
p60 &lt;- LL(p=0.6,n=100,k=1) 
p80 &lt;- LL(p=0.8,n=100,k=1)
p60
```

```
# [1] -86.61844
```

```r
p80
```

```
# [1] -154.9523
```

&lt;font color="#FF0066"&gt;&lt;i&gt;Bonus&lt;/i&gt;&lt;/font&gt;: ¬øQu√© debo hacer para conocer el valor probabil√≠sticos de estos resultados?
---
# C.- Likelihood y Log-Likelihood Functions

- Ejercicio:

**d.-** Volviendo a los datos del investigador ¬øCu√°l ser√≠a el error estandar y los intervalos de confianza para un `\(\alpha=0.05\)` a partir de la muestra? 

--

```r
# Sintaxis
#d. Standard Error 
se &lt;- function(n,p){sqrt((p*(1-p))/n)}
se_musiques &lt;- se(100, 0.01)
se_musiques 
```

```
# [1] 0.009949874
```

```r
#d. Confidence Intervals
p_hat &lt;- 0.01
ci_sup &lt;- p_hat + 1.96 * se_musiques
ci_inf &lt;- p_hat - 1.96 * se_musiques
```
---
# C.- Likelihood y Log-Likelihood Functions

- Ejercicio:

**d.-** Volviendo a los datos del investigador ¬øCu√°l ser√≠a el error estandar y los intervalos de confianza para un `\(\alpha=0.05\)` a partir de la muestra? 

--

```r
# Sintaxis
#d. Confidence Intervals
ci_sup 
```

```
# [1] 0.02950175
```

```r
ci_inf
```

```
# [1] -0.009501754
```

El porcentaje de m√∫sicos cl√°sicos renombrados con 'o√≠do absoluto' parece estar entre 0% de quienes se encuentran en las orquestas m√°s renombradas de EEUU, pero no superan el 3% entre estos profesionales.

---
# D.- Tablas de Contingencia

![](nefa.png)

---
# D.- Tablas de Contingencia

En esta secci√≥n trabajaremos sobre los datos de la **National Survey of Culture and the Arts 2018** coordinada por el *National Endowment for the Arts USA* con un muestreo representativo de la poblaci√≥n de EEUU. La muestra contiene 8609 casos y variables demogr√°ficas, socioecon√≥micas y de consumo cultural. En esta ocaci√≥n trabajaremos con 10 de ellas.


```r
# Sintaxis
#Cargar base de datos
load("nsca2018.Rda")
```

---

# D.- Tablas de Contingencia

En esta secci√≥n trabajaremos sobre los datos de la **National Survey of Culture and the Arts 2018** coordinada por el *National Endowment for the Arts USA* con un muestreo representativo de la poblaci√≥n de EEUU. La muestra contiene 8609 casos y variables demogr√°ficas, socioecon√≥micas y de consumo cultural. En esta ocaci√≥n trabajaremos con 10 de ellas.


```r
# Sintaxis
#Exploraci√≥n de datos
tibble(data1)
```

```
# # A tibble: 8,609 x 10
#    sexo      raza          educacion                           hijes jazz  clasica opera ballet museos libros
#    &lt;fct&gt;     &lt;fct&gt;         &lt;fct&gt;                               &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;   &lt;fct&gt; &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; 
#  1 (2) Fema‚Ä¶ (01) White O‚Ä¶ (37) 11th grade                         0 (2) ‚Ä¶ (2) No  (2) ‚Ä¶ (2) No (2) No (2) No
#  2 (2) Fema‚Ä¶ (01) White O‚Ä¶ (39) High school grad-diploma or e‚Ä¶     0 (2) ‚Ä¶ (2) No  (2) ‚Ä¶ (2) No (2) No (2) No
#  3 (2) Fema‚Ä¶ (01) White O‚Ä¶ (39) High school grad-diploma or e‚Ä¶     0 (2) ‚Ä¶ (2) No  (2) ‚Ä¶ (2) No (2) No (1) Y‚Ä¶
#  4 (1) Male  (01) White O‚Ä¶ (46) Doctorate degree (ex: PhD, Ed‚Ä¶     1 (2) ‚Ä¶ (2) No  (2) ‚Ä¶ (2) No (2) No (2) No
#  5 (2) Fema‚Ä¶ (01) White O‚Ä¶ (39) High school grad-diploma or e‚Ä¶     0 (2) ‚Ä¶ (2) No  (2) ‚Ä¶ (2) No (2) No (2) No
#  6 (2) Fema‚Ä¶ (01) White O‚Ä¶ (39) High school grad-diploma or e‚Ä¶     0 (2) ‚Ä¶ (2) No  (2) ‚Ä¶ (2) No (2) No (1) Y‚Ä¶
#  7 (1) Male  (01) White O‚Ä¶ (39) High school grad-diploma or e‚Ä¶     0 (2) ‚Ä¶ (2) No  (2) ‚Ä¶ (2) No (2) No (2) No
#  8 (1) Male  (01) White O‚Ä¶ (39) High school grad-diploma or e‚Ä¶     0 (2) ‚Ä¶ (2) No  (2) ‚Ä¶ (2) No (2) No (2) No
#  9 (2) Fema‚Ä¶ (01) White O‚Ä¶ (36) 10th grade                         0 (2) ‚Ä¶ (2) No  (2) ‚Ä¶ (2) No (2) No (2) No
# 10 (1) Male  (01) White O‚Ä¶ (39) High school grad-diploma or e‚Ä¶     0 (2) ‚Ä¶ (2) No  (2) ‚Ä¶ (2) No (2) No (1) Y‚Ä¶
# # ‚Ä¶ with 8,599 more rows
```

---
# D.- Tablas de Contingencia

Justamente, una de las discusiones m√°s recientes en los estudios interseccionales de las relaciones entre g√©nero y preferencias culurales se ha centrado en comprender las distribuciones de datos entre formas est√©ticas y tipo de afluencias de p√∫blicos. En este contexto, parece interesante explorar los registros de p√∫blicos en estados unidos en funci√≥n del g√©nero de los asistentes a 6 clases de eventos  del calendario anual de ofertas culturalesv(conciertos de jazz, m√∫sica cl√°sica, opera, ballet, exposiciones de arte contempor√°neo en museos, y compras de libros).



```r
# Sintaxis
#Relaciones multivariadas (en este caso bivariadas)
ctable1 &lt;- data1 %&gt;% with(table(sexo,jazz))
print(ctable1)
```

```
#             jazz
# sexo         (1) Yes (2) No
#   (1) Male       360   3559
#   (2) Female     427   4263
```
---
# D.- Tablas de Contingencia


```r
# Sintaxis
#Relaciones multivariadas (en este caso bivariadas)
ctable2 &lt;- data1 %&gt;% with(table(sexo,ballet))
print(ctable2)
```

```
#             ballet
# sexo         (1) Yes (2) No
#   (1) Male        93   3826
#   (2) Female     208   4482
```

```r
ctable3 &lt;- data1 %&gt;% with(table(sexo,museos))
print(ctable3)
```

```
#             museos
# sexo         (1) Yes (2) No
#   (1) Male       889   3030
#   (2) Female    1253   3437
```
---
# D.- Tablas de Contingencia


```r
# Sintaxis
#Relaciones multivariadas 
ctable4 &lt;- data1 %&gt;% with(table(raza,jazz))
print(ctable4)
```

```
#                                            jazz
# raza                                        (1) Yes (2) No
#   (01) White Only                               640   6501
#   (02) Black Only                               103    778
#   (03) American Indian, Alaskan Native Only       6     90
#   (04) Asian Only                                22    300
#   (05) Hawaiian/Pacific Islander Only             2     45
#   (06) White-Black                                4     27
#   (07) White-AI                                   4     45
#   (08) White-Asian                                3     13
#   (09) White-HP                                   1      4
#   (10) Black-AI                                   0      6
#   (11) Black-Asian                                0      0
#   (12) Black-HP                                   0      0
#   (13) AI-Asian                                   0      0
#   (14) AI-HP                                      0      0
#   (15) Asian-HP                                   1      5
#   (16) W-B-AI                                     1      7
#   (17) W-B-A                                      0      0
#   (18) W-B-HP                                     0      0
#   (19) W-AI-A                                     0      0
#   (20) W-AI-HP                                    0      0
#   (21) W-A-HP                                     0      1
#   (22) B-AI-A                                     0      0
#   (23) W-B-AI-A                                   0      0
#   (24) W-AI-A-HP                                  0      0
#   (25) Other 3 Race Combinations                  0      0
#   (26) Other 4 and 5 Race Combinations            0      0
```
---
# D.- Tablas de Contingencia

- Ejercicio:

![](jazz.png)
---
# D.- Tablas de Contingencia

- Ejercicio:

Una de las discusiones m√°s interesantes en la configuraci√≥n de los mundos de arte musical en la cultura popular estadounidense, recientemente ha girado  en torno a la inversi√≥n simultanea entre *performers* y *p√∫blicos* en base a la composici√≥n de g√©nero de √©stos. Dicha particularidad, observan investigadores en sociolog√≠a de la m√∫sica, resulta ser particularmente acentuada en la constituci√≥n de la m√∫sica jazz. A diferencia de los a√±os 1930s y 1940s, en que las mujeres eran las grandes protagonistas de los escenarios y los hombres eran el principal p√∫blico, en la actualidad esta relaci√≥n se habr√≠a invertido, dando como resultado el escazo protagonismo femenino en los escenarios, generando un desplazamiento de √©stas hacia p√∫blicos. Se cree que hoy el principal p√∫blico que asiste a eventos de m√∫sica jazz, son mujeres.

Exploremos inicialmente esta relaci√≥n en base a los p√∫blicos de jazz en el 2018 con **n=8609**:

**a.-** De acuerdo a la relaci√≥n bivariada jazz|sexo, en 2018 ¬øcu√°l era la probabilidad de haber encontrado una **mujer que haya asistido a eventos de jazz** y la probabilidad de haber encontrado un **hombre que haya asitido**?

**b.-** ¬øCu√°l era la probabilidad de haber sido un **hombre** y, de forma independiente, la probabilidad de haber sido alguien que **no asisti√≥ a eventos de jazz** en 2018?

**c.-** ¬øCu√°l era la probabilidad de que, **siendo una mujer estadounidense**, no **hayas asistido a un evento de jazz** en 2018?

---
# D.- Tablas de Contingencia

**a.-** De acuerdo a la relaci√≥n bivariada jazz|sexo, en 2018 ¬øcu√°l era la probabilidad de haber encontrado una **mujer que haya asistido a eventos de jazz** y la probabilidad de haber encontrado un **hombre que haya asitido**?

--


```r
# Sintaxis
#Relaciones multivariadas (en este caso bivariadas)
ctable1 &lt;- data1 %&gt;% with(table(sexo,jazz))
print(ctable1)
```

```
#             jazz
# sexo         (1) Yes (2) No
#   (1) Male       360   3559
#   (2) Female     427   4263
```

```r
# Distribuci√≥n conjunta
joint_dis &lt;- ctable1/sum(ctable1); joint_dis 
```

```
#             jazz
# sexo            (1) Yes     (2) No
#   (1) Male   0.04181670 0.41340458
#   (2) Female 0.04959926 0.49517946
```
---
# D.- Tablas de Contingencia

**b.-** ¬øCu√°l era la probabilidad de haber sido un **hombre** y, de forma independiente, la probabilidad de haber sido alguien que **no asisti√≥ a eventos de jazz** en 2018?

--


```r
#Sintaxis
#Distribuci√≥n marginal de sexo 
margin_sexo &lt;- apply(joint_dis,1,sum); margin_sexo 
```

```
#   (1) Male (2) Female 
#  0.4552213  0.5447787
```

```r
#Distribuci√≥n marginal de jazz 
margin_jazz &lt;- apply(joint_dis,2,sum); margin_jazz
```

```
#    (1) Yes     (2) No 
# 0.09141596 0.90858404
```
---
# D.- Tablas de Contingencia

**c.-** ¬øCu√°l era la probabilidad de que, **siendo una mujer estadounidense**, no **hayas asistido a un evento de jazz** en 2018?

--


```r
#Sintaxis
#Distribucuiones condicionales
ctable1 &lt;- data1 %&gt;% with(table(sexo,jazz)) # relacion bivariada como tabla de contingencia
joint_sexo_jazz &lt;- ctable1/sum(ctable1) #distribuci√≥n conjunta de las variables
margin_sexo &lt;- apply(joint_sexo_jazz,1,sum) # distribuci√≥n marginal de sexo
joint_sexo_jazz/margin_sexo #distribuci√≥n condicional de jazz dado sexo 
```

```
#             jazz
# sexo            (1) Yes     (2) No
#   (1) Male   0.09186017 0.90813983
#   (2) Female 0.09104478 0.90895522
```

---
# D.- Tablas de Contingencia


&lt;font color="#FF0066"&gt;&lt;i&gt;Bonus&lt;/i&gt;&lt;/font&gt;: ¬øCu√°les ser√≠an las **probabilidades esperadas** si asumieramos que sexo y la asistencia a eventos de m√∫sica jazz son variables totalmente independientes entre s√≠?

--

**Distribuciones marginales**

```
##   (1) Male (2) Female 
##  0.4552213  0.5447787
```

```
##    (1) Yes     (2) No 
## 0.09141596 0.90858404
```

--

**Probabilidad esperada bajo** `\(X \perp Y\)`


```r
#Distribuci√≥n 
joint_sexo_jazz_ind &lt;- margin_sexo %*% t(margin_jazz)
print(joint_sexo_jazz_ind)
```

```
##         (1) Yes    (2) No
## [1,] 0.04161449 0.4136068
## [2,] 0.04980147 0.4949773
```
---
# D.- Tablas de Contingencia


&lt;font color="#FF0066"&gt;&lt;i&gt;Bonus&lt;/i&gt;&lt;/font&gt;: ¬øY las **frecuencias esperadas**?

--


```r
#Frecuencias esperadas bajo independencia
joint_sexo_jazz_freq &lt;- joint_sexo_jazz_ind*8609 
print(joint_sexo_jazz_freq)
```

```
##       (1) Yes   (2) No
## [1,] 358.2591 3560.741
## [2,] 428.7409 4261.259
```

---
# E.- Gr√°ficos en `R`

Una de las herramientas m√°s √∫tiles para la exploraci√≥n y evaluaci√≥n de nuestros datos son los an√°lisis visuales disponibles a partir de distintas funciones de `R`. Con todo, uno de los repositorios m√°s √∫tiles y de m√°s alta potencia gr√°fica es  **library(ggplot2)** el cual forma parte de las funciones incluidas en la librer√≠a **library(tidyverse)**. 

A continuaci√≥n veamos una breve introducci√≥n a su sintaxis y usos.

![](ggplot2.png)

---
# E.- Gr√°ficos en `R`

- Existen 3 elementos centrales en la sintaxis del comando *ggplot*:

**1** - Una estructura visual (aesthetic) que le informa a  *ggplot* qu√© variables ser√°n mapeadas en el eje *X* e *Y*, (y frecuentemente otros atributos del gr√°fico, como los esquemas de color con que ser√°n completados). Intuitivamente, &lt;font color="#009999"&gt;&lt;i&gt;`aes`&lt;/i&gt;&lt;/font&gt; puede ser pensada como la funci√≥n que especifica qu√© estar√°s graficando.

**2** - Una geometr√≠a (geom) que le informa a *ggplot* cu√°l ser√° la estructura b√°sica para la creaci√≥n del gr√°fico. Intuitivamente, &lt;font color="#009999"&gt;&lt;i&gt;`geom`&lt;/i&gt;&lt;/font&gt; puede ser pensada como la funci√≥n que especifica c√≥mo estar√°s graficando.

**3** - Otras opciones de customizaci√≥n (labels), como los t√≠tulos del gr√°fico, los tama√±os de los elementos, el tipo de tema de construcci√≥n, etc. En la funci√≥n esto es conocido como &lt;font color="#009999"&gt;&lt;i&gt;`labs`&lt;/i&gt;&lt;/font&gt;.

Entonces:

- `\(ggplot=aes+geom+labs\)`

- `\(ggplot=(df,x=, y=) + (type, fill) + (title, subtitle, caption)\)`

Veamos ejemplos concretos usando la NSCA.

---
# E.- Gr√°ficos en `R`

- Exploremos el tipo de gr√°ficos en base a la distribuci√≥n del n de hijes de las personas en la muestra:

&lt;font color="#009999"&gt;&lt;i&gt;Histograma&lt;/i&gt;&lt;/font&gt;:


```r
#Sintaxis
#Histograma de n√∫mero de hijes
ggplot(data1, aes(x = hijes)) + 
  geom_histogram(fill=wes_palette("Darjeeling1",n=2)[2]) + 
  labs(title = "NSCA 2018", subtitle = "Histograma de Hijes", 
       caption = "Figura 1", x = "hijes", y = "conteo")
```

![](Ayudant√≠a_2_files/figure-html/unnamed-chunk-27-1.png)&lt;!-- --&gt;
---
# E.- Gr√°ficos en `R`

- Exploremos el tipo de gr√°ficos en base a la distribuci√≥n del n de hijes de las personas en la muestra:

&lt;font color="#009999"&gt;&lt;i&gt;Densidad&lt;/i&gt;&lt;/font&gt;:


```r
#Sintaxis
#Densidad de n√∫mero de hijes
ggplot(data1, aes(x = hijes)) + 
  geom_density(fill=wes_palette("Darjeeling1",n=2)[2]) + 
  labs(title = "NSCA 2018", subtitle = "Histograma de Hijes", 
       caption = "Figura 2", x = "hijes", y = "densidad")
```

![](Ayudant√≠a_2_files/figure-html/unnamed-chunk-28-1.png)&lt;!-- --&gt;
---
# E.- Gr√°ficos en `R`

- Exploremos ahora las distribuciones de los campos culturales:

&lt;font color="#009999"&gt;&lt;i&gt;Barras&lt;/i&gt;&lt;/font&gt;:


```r
#Sintaxis
#Gr√°fico de barras libros
ggplot(data1, aes(x = libros)) +
  geom_bar(fill=wes_palette("Darjeeling1",n=2)[2]) + 
  labs(title = "NSCA 2018", subtitle = "Frecuencia Libros", 
       caption = "Figura 3", x = "libros", y = "conteo")
```

![](Ayudant√≠a_2_files/figure-html/unnamed-chunk-29-1.png)&lt;!-- --&gt;
---
# Referencias Sugeridas:

‚Ä¢ Laurie Hanquinet &amp; Mike Savage (2016). Routledge International Handbook of the Sociology of Art and Culture. London: Routledge.

‚Ä¢ Hadley Wickham (2015). Advanced R, CRC Press, Taylor &amp; Francis Group, Boca Raton, FL. En https://adv-r.hadley.nz/

‚Ä¢ Hadley Wickham and Garrett Grolemund (2017). R for Data Science. Import, Tidy, Transform, Visualize, and Model Data. O‚ÄôReilly Media, Inc.. En https://r4ds.had.co.nz/


---
class: inverse, center, middle

.huge[
**¬°Hasta la pr√≥xima!**
]

 üíª üìä üé®üéªüé∑ 
 
&lt;br&gt;
Roberto Vel√°zquez &lt;br&gt;
https://github.com/rovelazqu &lt;br&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": true,
"slideNumberFormat": "%current%"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
